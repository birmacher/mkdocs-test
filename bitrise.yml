format_version: 1.2.0
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

app:
  envs:
  - REPO_URL: git@github.com:viktorbenei/mkdocs-test.git

workflows:
  deploy:
    steps:
    - script:
        description: |
          Note: mkdocs builds into `./site/`
          Official GitHub Pages deploy guide: https://help.github.com/articles/creating-project-pages-manually/
        inputs:
        - content: |-
            #!/bin/bash
            set -ex
            rm -rf site
            git clone --branch gh-pages "$REPO_URL" ./site
            mkdocs build --clean
            cd site/
            git add .
            git commit -m 'deploy'
            git push origin gh-pages
